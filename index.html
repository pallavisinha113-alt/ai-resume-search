<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>AI Resume Search â€“ Availability Added</title>

<!-- TensorFlow + USE -->
<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@3.21.0/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/universal-sentence-encoder@1.3.3/dist/universal-sentence-encoder.min.js"></script>

<style>
  body {
    font-family: Arial, sans-serif;
    background: white;
    margin: 0;
    padding: 20px;
  }

  h1 {
    text-align: center;
    margin-bottom: 10px;
  }

  #searchBox {
    width: 100%;
    padding: 14px;
    font-size: 18px;
    border-radius: 8px;
    border: 1px solid #ccc;
    margin-bottom: 20px;
  }

  .candidate-card {
    background: #ffffff;
    border: 1px solid #eee;
    padding: 16px;
    margin-bottom: 15px;
    border-radius: 10px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.05);
  }

  .score {
    float: right;
    background: #e8f1ff;
    padding: 4px 8px;
    border-radius: 6px;
    font-weight: bold;
    font-size: 14px;
  }

  .availability {
    font-size: 14px;
    color: #444;
    margin-top: 8px;
  }
</style>
</head>

<body>
<h1>AI Resume Search (With Availability)</h1>

<input id="searchBox" type="text" placeholder="Search skills: C++, Java, Embedded..." />

<h2>Results</h2>
<div id="results"></div>

<script>
let model;

// -----------------------------
// Resume Database (25 entries)
// -----------------------------
const resumes = [
  {
    name: "Arjun Mehta",
    resumeText: `
      Senior C++ and Embedded Engineer.
      Skills: C++, Embedded Linux, RTOS, CAN Bus, Automotive ECUs.
    `,
    availability: { hoursPerWeek: 20, availableFrom: "2025-02-10" }
  },
  {
    name: "Sophia Rodriguez",
    resumeText: `
      Java Backend Developer.
      Skills: Java, Spring Boot, APIs, Docker, SQL, Kubernetes.
    `,
    availability: { hoursPerWeek: 40, availableFrom: "2025-02-01" }
  },
  {
    name: "Ethan Williams",
    resumeText: `
      Telecom Engineer specialized in 5G and LTE.
      Skills: RF Systems, 5G NR, Protocol Stack.
    `,
    availability: { hoursPerWeek: 30, availableFrom: "2025-03-01" }
  },
  {
    name: "Mira Patel",
    resumeText: `
      Embedded Firmware Engineer.
      Skills: C, C++, FreeRTOS, BLE, STM32.
    `,
    availability: { hoursPerWeek: 25, availableFrom: "2025-02-15" }
  },
  {
    name: "Daniel Chen",
    resumeText: `
      Python Developer & ML Engineer.
      Skills: Python, TensorFlow, MLOps, APIs.
    `,
    availability: { hoursPerWeek: 35, availableFrom: "2025-02-05" }
  },

  // --- 20 MORE SAMPLE RESUMES ---
  {
    name: "Aisha Khan",
    resumeText: "Frontend Developer skilled in React, JS, HTML, CSS.",
    availability: { hoursPerWeek: 20, availableFrom: "2025-02-20" }
  },
  {
    name: "Rahul Singh",
    resumeText: "DevOps Engineer: AWS, CI/CD, Terraform.",
    availability: { hoursPerWeek: 40, availableFrom: "2025-03-10" }
  },
  {
    name: "Emily Turner",
    resumeText: "QA Engineer: Selenium, Cypress, Automation.",
    availability: { hoursPerWeek: 30, availableFrom: "2025-02-12" }
  },
  {
    name: "James Carter",
    resumeText: "Full Stack Developer: Node.js, JavaScript, MongoDB.",
    availability: { hoursPerWeek: 25, availableFrom: "2025-02-22" }
  },
  {
    name: "Olivia Martinez",
    resumeText: "Cloud Engineer: Azure, Kubernetes, Microservices.",
    availability: { hoursPerWeek: 35, availableFrom: "2025-02-18" }
  },
  {
    name: "Wei Zhang",
    resumeText: "C++ Engineer: STL, Boost, Linux Systems.",
    availability: { hoursPerWeek: 20, availableFrom: "2025-03-05" }
  },
  {
    name: "Carlos Pereira",
    resumeText: "Embedded Systems: ARM, C, IoT Firmware.",
    availability: { hoursPerWeek: 40, availableFrom: "2025-02-25" }
  },
  {
    name: "Sara Ahmed",
    resumeText: "Data Analyst: Python, Pandas, PowerBI.",
    availability: { hoursPerWeek: 15, availableFrom: "2025-02-14" }
  },
  {
    name: "Lucas Brown",
    resumeText: "Java Architect: Microservices, Spring Cloud.",
    availability: { hoursPerWeek: 40, availableFrom: "2025-02-28" }
  },
  {
    name: "Priya Nair",
    resumeText: "Automation Engineer: PLC, SCADA, Industrial Controls.",
    availability: { hoursPerWeek: 32, availableFrom: "2025-03-02" }
  },
  {
    name: "Victor Hugo",
    resumeText: "Cybersecurity Engineer: SIEM, IDS, Ethical Hacking.",
    availability: { hoursPerWeek: 22, availableFrom: "2025-02-11" }
  },
  {
    name: "Haruto Sato",
    resumeText: "AI Researcher: LLMs, NLP, Reinforcement Learning.",
    availability: { hoursPerWeek: 40, availableFrom: "2025-03-20" }
  },
  {
    name: "Nina Dimitrova",
    resumeText: "Database Engineer: PostgreSQL, Oracle, Tuning.",
    availability: { hoursPerWeek: 28, availableFrom: "2025-02-13" }
  },
  {
    name: "Mohammed Ali",
    resumeText: "Network Engineer: Routing, Switching, Firewalls.",
    availability: { hoursPerWeek: 35, availableFrom: "2025-03-01" }
  },
  {
    name: "Emma Wilson",
    resumeText: "UX Designer: Figma, User Research, Wireframes.",
    availability: { hoursPerWeek: 20, availableFrom: "2025-02-08" }
  },
  {
    name: "Ben Thompson",
    resumeText: "Backend Developer: C#, .NET Core, SQL.",
    availability: { hoursPerWeek: 40, availableFrom: "2025-02-26" }
  },
  {
    name: "Raj Patel",
    resumeText: "Embedded Automotive Engineer: AUTOSAR, C, CAN.",
    availability: { hoursPerWeek: 35, availableFrom: "2025-03-03" }
  },
  {
    name: "Hannah Brooks",
    resumeText: "Mobile Developer: Flutter, Android, Dart.",
    availability: { hoursPerWeek: 24, availableFrom: "2025-02-21" }
  },
  {
    name: "Gael Moreau",
    resumeText: "Robotics Engineer: ROS, C++, SLAM.",
    availability: { hoursPerWeek: 30, availableFrom: "2025-03-12" }
  },
];


// -----------------------------
// Load AI Model
// -----------------------------
async function loadModel() {
  model = await use.load();
  console.log("AI Model Loaded");
}
loadModel();


// -----------------------------
// Embedding Function
// -----------------------------
async function embed(text) {
  const vec = await model.embed([text]);
  return vec.arraySync()[0];
}


// -----------------------------
// Cosine Similarity
// -----------------------------
function cosineSimilarity(a, b) {
  let dot = 0, normA = 0, normB = 0;
  for (let i = 0; i < a.length; i++) {
    dot += a[i] * b[i];
    normA += a[i] * a[i];
    normB += b[i] * b[i];
  }
  return dot / (Math.sqrt(normA) * Math.sqrt(normB));
}


// -----------------------------
// Search Logic
// -----------------------------
document.getElementById("searchBox").addEventListener("input", async function() {
  let query = this.value.trim();
  let resultsDiv = document.getElementById("results");
  resultsDiv.innerHTML = "";

  if (!query || !model) return;

  const queryVec = await embed(query);

  let scored = await Promise.all(
    resumes.map(async (r) => {
      const resumeVec = await embed(r.resumeText);
      const score = cosineSimilarity(queryVec, resumeVec);
      return { ...r, score };
    })
  );

  scored.sort((a, b) => b.score - a.score);

  scored.forEach(c => {
    const card = document.createElement("div");
    card.className = "candidate-card";
    card.innerHTML = `
      <div class="score">${(c.score * 100).toFixed(1)}%</div>
      <h3>${c.name}</h3>
      <p>${c.resumeText.substring(0, 160)}...</p>
      <div class="availability">
        <strong>Availability:</strong> ${c.availability.hoursPerWeek} hrs/week  
        | From: ${c.availability.availableFrom}
      </div>
    `;
    resultsDiv.appendChild(card);
  });
});
</script>

</body>
</html>
